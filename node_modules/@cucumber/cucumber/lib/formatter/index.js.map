{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/formatter/index.ts"],"names":[],"mappings":";;AAMA,oDAAiD;AAsCjD,MAAqB,SAAS;IAY5B,YAAY,OAA0B;QACpC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAA;QAChC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAA;QACtB,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAA;QACpD,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAA;QACtB,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAA;QAC5C,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAA;QAC5B,IAAI,CAAC,kBAAkB,GAAG,OAAO,CAAC,kBAAkB,CAAA;QACpD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAA;QAC9B,IAAI,CAAC,gBAAgB,GAAG,IAAA,8BAAc,EACpC,OAAO,CAAC,iBAAiB,CAAC,gBAAgB,EAC1C,IAAI,CACL,CAAA;IACH,CAAC;IAED,KAAK,CAAC,QAAQ;QACZ,MAAM,IAAI,CAAC,OAAO,EAAE,CAAA;IACtB,CAAC;CACF;AA9BD,4BA8BC","sourcesContent":["import { IColorFns } from './get_color_fns'\nimport { EventDataCollector } from './helpers'\nimport StepDefinitionSnippetBuilder from './step_definition_snippet_builder'\nimport { Writable } from 'stream'\nimport { ISupportCodeLibrary } from '../support_code_library_builder/types'\nimport { EventEmitter } from 'events'\nimport { valueOrDefault } from '../value_checker'\nimport { SnippetInterface } from './step_definition_snippet_builder/snippet_syntax'\n\nexport interface FormatRerunOptions {\n  separator?: string\n}\n\nexport interface FormatOptions {\n  colorsEnabled?: boolean\n  rerun?: FormatRerunOptions\n  snippetInterface?: SnippetInterface\n  snippetSyntax?: string\n  printAttachments?: boolean\n  [customKey: string]: any\n}\n\nexport interface IPublishConfig {\n  url: string\n  token: string\n}\n\nexport type IFormatterStream = Writable\nexport type IFormatterLogFn = (buffer: string | Uint8Array) => void\nexport type IFormatterCleanupFn = () => Promise<any>\n\nexport interface IFormatterOptions {\n  colorFns: IColorFns\n  cwd: string\n  eventBroadcaster: EventEmitter\n  eventDataCollector: EventDataCollector\n  log: IFormatterLogFn\n  parsedArgvOptions: FormatOptions\n  snippetBuilder: StepDefinitionSnippetBuilder\n  stream: Writable\n  cleanup: IFormatterCleanupFn\n  supportCodeLibrary: ISupportCodeLibrary\n}\n\nexport default class Formatter {\n  protected colorFns: IColorFns\n  protected cwd: string\n  protected eventDataCollector: EventDataCollector\n  protected log: IFormatterLogFn\n  protected snippetBuilder: StepDefinitionSnippetBuilder\n  protected stream: Writable\n  protected supportCodeLibrary: ISupportCodeLibrary\n  protected printAttachments: boolean\n  private readonly cleanup: IFormatterCleanupFn\n  static readonly documentation: string\n\n  constructor(options: IFormatterOptions) {\n    this.colorFns = options.colorFns\n    this.cwd = options.cwd\n    this.eventDataCollector = options.eventDataCollector\n    this.log = options.log\n    this.snippetBuilder = options.snippetBuilder\n    this.stream = options.stream\n    this.supportCodeLibrary = options.supportCodeLibrary\n    this.cleanup = options.cleanup\n    this.printAttachments = valueOrDefault(\n      options.parsedArgvOptions.printAttachments,\n      true\n    )\n  }\n\n  async finished(): Promise<void> {\n    await this.cleanup()\n  }\n}\n"]}